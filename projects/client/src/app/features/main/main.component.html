<div
  class="h-full"
  [@fadeThrough]="routerOutletDataReader.read()?.['animationState']"
>
  <router-outlet></router-outlet>
</div>

<app-header
  *appLayout="'header'; let navigator = navigator"
  (menuToggle)="navigator.toggle()"
>
  <app-theme-button></app-theme-button>
  <app-refetch-button></app-refetch-button>
  <app-profile-btn></app-profile-btn>
</app-header>

<div class="flex h-full flex-col" *appLayout="'navigation'">
  <mat-action-list class="mb-2" *ngIf="user$ | async as user">
    <button mat-list-item>
      <div matLine>
        {{ user.nickname || user.username }}
      </div>
      <div matLine class="text-medium-emphasis">
        {{ (user.nickname && user.username) || 'Account Settings' }}
      </div>
    </button>
  </mat-action-list>

  <mat-divider></mat-divider>

  <mat-nav-list>
    <a
      mat-list-item
      *ngFor="let link of links"
      [routerLink]="link.commands"
      routerLinkActive="router-link-active"
    >
      <mat-icon matListIcon>{{ link.icon }}</mat-icon>
      <div matLine i18n>{{ link.text }}</div>
    </a>
  </mat-nav-list>

  <div class="grow"></div>

  <div class="m-2 flex flex-col items-stretch">
    <button mat-stroked-button class="uppercase" [routerLink]="['/', 'auth']">
      <mat-icon class="mr-1">logout</mat-icon>
      <span>Logout</span>
    </button>
  </div>
</div>
